* Этапы
** INPROGRESS MVP - stateless implementation
- State "INPROGRESS" from              [2020-05-08 Пт 01:27]
- State "INPROGRESS" from "TODO"       [2020-05-08 Пт 01:27]
  
*БД*: SQLite

- [X] хранение пользователей;
- [ ] хранение курсов с вложенной структурой;
- [ ] интерактивная клавиатура;
- [ ] отправка курсов с помощью коллбэков интерактивной клавиатуры;
*** Приложения и модели
*Типы документов*:
- ~audio~
- ~video~
- ~document~
- ~link~
*** Болталка
Задача: загрузить курс хога в БД и отобразить это в БД.

Варианты:
- написат скрипт на питоне
- написать реализацию на go

*Реализация на go*:
+ можно сделать с помощью уже настроенной ORM, вместе с этим попроактиковать её использование
+ разбор функционала gorm
+ разбор функционала бота

- ????? не скриптовый язык?

*Реализация на python*
+ знаю питон;
+ такие задачи решать ощутимо проще на питоне без статической типизации;


- не знаю SQL
- не знаю как работать с БД из питона и полученные знания вероятно пригодятся еще не скоро (хотя все равно на 100% уверен, что будут полезными)
*** TODO Загручик курсов в Telegram
- State "TODO"       from              [2020-05-11 Пн 13:42]
**** Задача
Загрузить курс, из структуры директорий создавать "листы" и "ветви"
**** Реализация
- [X] отправить тестовый файл и получить к нему id
- [X] подключиться к sqlite
- [ ] функция для создания записи в БД после отправки файла

функция обработка_папки():
  для файла в папке:
    если файл == папка:
      обработка_папки(путь)
    иначе:
      обработка_файла(путь)
** TODO Statefull implementation
- State "TODO"       from              [2020-03-22 Вс 17:30]
[[https://docs.microsoft.com/ru-ru/azure/bot-service/bot-builder-concept-state?view=azure-bot-service-4.0][Какая-то статья об управлении состоянием ботов]]
** Вопросы. Ответов [1/1]
- [X] какую БД использовать (SQL или NoSQL): SQL
* Идеи
- бот для MOOC курсов;
- статистика обучения с графиками;
- напоминания для изучения;
- загрузка своих курсов через веб морду:
  - авторизация пользователей через tg бота перед возможностью загрузки;
  - телеграмм не может 100% гарантировать сохранность данных, поэтому лучше всего будет хранить все курсы "на своей стороне";
- к курсам в будущем могут быть присвоены тэги и категории;
- конфигуратор тестов из веб морды, например;
- оценки курса;
- комментарии;
- чат изучающих;
- Как-то привязать anki;
- related links для курса??
* Задачи
** [#B] Разобраться с миграциями/ORM
*Задача*:
- не запускать миграции в рантайме;
- найти способ писать датамиграции (SQL?);
*Варианты*:
- отдельная утилита для запуска миграций БД
- запуск по ключу основного приложения

[[https://github.com/go-gormigrate/gormigrate][gormigrate]]
** [#B] CI/CD                                                         :epic:
* Журнал
** [2020-03-22 Вс] [1/1]
- [X] реализовать эхо бота с записью пользователя в БД
** [2020-05-06 Ср] - [2020-05-07 Чт] [4/4]
- [X] запустить бота через прокси;
- [X] изучить тип данных User в боте, спроектировать модель пользователя
- [X] расширить модель User в БД в соответствии с типом telebot;
- [X] обработчик команды ~/start~:
  - [X] запись пользователя в БД;
  - [X] отправка приветствия
** [2020-05-08 Пт] - [2020-05-09 Сб] [3/3]
- [X] изучить API телеграмм и узнать, какие типы документов там бывают:
  - [X] загуглить ~TGAPI~
  - [X] посмотреть обертку в go
- [X] создать и лист в БД:
  - [X] продумать поля и связи;
  - [X] изучить создание связанных записей в gorm;
  - [X] создать модели для "листа" и "ветви";
- [X] При получении команды /start также создавать в БД запись чата.
** [2020-05-10 Вс] - [2020-05-11 Пн] [3/3]
- [X] Связать ~Chat~ и ~User~ при создании;
- [X] изучить базовый синтаксис sql + sqlite3 библиотека в python;
- [X] скрипт отправки курсов в tg с и запись данных о файлах и курсах в базу;
** <2020-05-12 Вт> - ... [0/4]
- [ ] изучить API генерации клавиатур в ~TGAPI~ и ~go-telegram-api~;
- [ ] продумать и реализовать интерфейс взаимодействия с ботом для текущих тестовых данных;
- [ ] ретраи и стратегии для ретраев для отправки сообщений;
- [ ] Посмотреть исходники бота на питоне, для переиспользования лучших практик (в частности фильтрация и обработка комманд, текста);

* Вопросы
В: может ли быть несколько персональных чатов с одним пользователем
О:

В: в каком виде будет осуществляться отправка сторонних ссылок, например Youtube
О: 
